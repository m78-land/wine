var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,i=Object.prototype.propertyIsEnumerable,o=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,r=(e,r)=>{for(var a in r||(r={}))t.call(r,a)&&o(e,a,r[a]);if(n)for(var a of n(r))i.call(r,a)&&o(e,a,r[a]);return e};import{c as a,a as l,i as s,u as d,t as c,C as u,b as f,d as m,e as p,f as h,g as w,h as g,j as b,k as R,l as z,m as E}from"./vendor.dded0a56.js";var L,y,v,N;!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const i=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,r)=>{const a=new URL(e,i);if(self[t].moduleMap[a])return n(self[t].moduleMap[a]);const l=new Blob([`import * as m from '${a}';`,`${t}.moduleMap['${a}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){r(new Error(`Failed to import: ${e}`)),o(s)},onload(){n(self[t].moduleMap[a]),o(s)}});document.head.appendChild(s)})),self[t].moduleMap={}}}("/assets/"),(y=L||(L={})).window="window",y.safeArea="safeArea",y.noLimit="noLimit",(N=v||(v={}))[N.L=0]="L",N[N.T=1]="T",N[N.R=2]="R",N[N.B=3]="B",N[N.LT=4]="LT",N[N.RT=5]="RT",N[N.RB=6]="RB",N[N.LB=7]="LB";const _={left:-1/0,right:1/0,top:-1/0,bottom:1/0},B={left:0,right:0,top:0,bottom:0},S={alignment:[.5,.5],sizeRatio:.84,bound:L.safeArea,initFull:!1,zIndex:1e3},x={opacity:0},T={opacity:1};function I(e){return{w:e[0],h:e[1]}}function O(e){let t,n;return e.width&&(t=e.width),e.height&&(n=e.height),n||(n=e.sizeRatio*window.innerHeight),t||(t=1.3*n),[t,n]}function j([e,t],n){return e>=n.left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height}function M(e,t,n,i){return{top:t,left:e,width:n,height:i}}function C(e,t=!0){return{onClick:e,onKeyPress:n=>{const i=n.code;("Enter"===i||t&&"Space"===i)&&(null==e||e())}}}const F=a();function P(e){const{state:t,setState:n,self:i,wrapElRef:o,headerElRef:a,update:u,insideState:f,setInsideState:m}=e;function p(){if(i.unmounted)return;const e=o.current.offsetWidth,n=o.current.offsetHeight,l=a.current.offsetWidth,s=a.current.offsetHeight,d=window.innerWidth,c=window.innerHeight;if(i.wrapSize=[e,n],i.headerSize=[l,s],i.availableSize=[d-e,c-n],i.winSize=[d,c],i.fullSize=[d,c],t.limitBound){const e=r(r({},B),t.limitBound),n=d-e.left-e.right,o=c-e.top-e.bottom;i.fullSize=[n,o]}!function(){const[e,n]=i.availableSize,[o,r]=i.wrapSize;if(i.windowBound={left:0,top:0,right:e,bottom:n},t.bound===L.window)return void(i.bound=i.windowBound);if(t.bound===L.safeArea){const t=I(i.headerSize).h;return void(i.bound={left:-o+t,top:0,right:e+o-t,bottom:n+r-t})}i.bound=_}()}function h(e,t,n){return i.x=l(e,i.bound.left,i.bound.right),i.y=l(t,i.bound.top,i.bound.bottom),u(r({x:i.x,y:i.y,immediate:!0,default:!0},n))}function w(){const e=r(r({},B),t.limitBound);i.memoWrapSize=i.wrapSize,i.memoX=Math.max(i.x,e.left),i.memoY=Math.max(i.y,e.top)}const g=d(((e,n)=>{if(!i.tipNode)return;const o=function([e,t],n,i){const o=r(r({},B),i),a=50,l=.2*e,s=.2*t,d=.6*t,c=.6*e,u=t/2,f=e/2,m=M(l+a+o.left,6+o.top,c,a);if(j(n,m))return{bound:m,size:M(o.left,o.top,e,u)};const p=M(e-a-6+o.left,s+6+o.top,a,d);if(j(n,p))return{bound:p,size:M(f+o.left,o.top,f,t)};const h=M(l+6+o.left,t-a-6+o.top,c,a);if(j(n,h))return{bound:h,size:M(o.left,u+o.top,e,u)};if(j(n,M(6+o.left,s+6+o.top,a,d)))return{bound:h,size:M(o.left,o.top,f,t)};const w=M(6+o.left,6+o.top,a,a);if(j(n,w))return{bound:w,size:M(o.left,o.top,f,u)};const g=M(6+o.left,t-6-a+o.top,a,a);if(j(n,g))return{bound:g,size:M(o.left,u+o.top,f,u)};const b=M(e-6-a+o.left,6+o.top,a,a);if(j(n,b))return{bound:b,size:M(f+o.left,o.top,f,u)};const R=M(e-6-a+o.left,t-6-a+o.top,a,a);return j(n,R)?{bound:R,size:M(f+o.left,u+o.top,f,u)}:void 0}(i.fullSize,e,t.limitBound);if(n)o?(!function(){if(!i.tipNode)return;"visible"!==i.tipNode.style.visibility&&(i.tipNode.style.visibility="visible",i.tipNode.style.opacity="1")}(),Object.entries(o.size).forEach((([e,t])=>{if(i.tipNode){const n=`${t}px`;n!==i.tipNode.style[e]&&(i.tipNode.style[e]=n)}}))):b();else if(b(),o){const e=o.size;h(e.left,e.top,{width:e.width,height:e.height}).then(p)}}),(e=>c(e,10)));function b(){i.tipNode&&"hidden"!==i.tipNode.style.visibility&&(i.tipNode.style.visibility="hidden",i.tipNode.style.opacity="0")}return{refreshDeps:p,setXY:h,resize:function(){let e=i.memoX,n=i.memoY,[o,a]=i.memoWrapSize||[];if(!s(e)||!s(n)){const o=function(e,t,n){const[i,o]=t,[r,a]=e;return[(i+n.left)*r,(o+n.top)*a]}(t.alignment,i.availableSize,r(r({},B),t.limitBound));e=o[0],n=o[1]}if(!s(o)||!s(a)){const[e,n]=O(t);o=e,a=n}i.bound=_,h(e,n,{width:o,height:a}).then((()=>{p(),f.isFull&&m({isFull:!1})}))},memoWinState:w,full:function(){var e,n;f.isFull||(w(),i.bound=_,h((null==(e=t.limitBound)?void 0:e.left)||B.left,(null==(n=t.limitBound)?void 0:n.top)||B.top,{width:i.fullSize[0],height:i.fullSize[1]}).then((()=>{p(),m({isFull:!0})})))},getCursorWrapOffset:function(e){const t=o.current.getBoundingClientRect(),n={x:(i=e)[0],y:i[1]};var i;return[n.x-t.left,n.y-t.top]},top:function(){F.emit(),t.zIndex<=S.zIndex&&n({zIndex:S.zIndex+1})},refreshTipNode:g}}function W(e,t,n){const i=u.useRef(null),{wrapElRef:o,self:r,update:a}=t;function s(e,[t]){const n=e.width+t-e.right,i=r.windowBound.right+e.width-e.left;return l(n,300,i)}function d(e,[,t]){const n=e.height+t-e.bottom,i=r.windowBound.bottom+e.height-e.top;return l(n,I(r.headerSize).h,i)}function c(e,[t]){const n=e.right-t,i=e.right;return{x:l(t,r.windowBound.left,e.right-300),width:l(n,300,i)}}function m(e,[,t]){const n=e.bottom-t,i=e.bottom;return{y:l(t,r.windowBound.top,e.bottom-300),height:l(n,300,i)}}return f((({xy:[t,i]})=>{const r=o.current.getBoundingClientRect(),l={immediate:!0};e===v.R&&(l.width=s(r,[t,i])),e===v.B&&(l.height=d(r,[t,i])),e===v.L&&Object.assign(l,c(r,[t,i])),e===v.T&&Object.assign(l,m(r,[t,i])),e===v.RB&&(l.width=s(r,[t,i]),l.height=d(r,[t,i])),e===v.LB&&(Object.assign(l,c(r,[t,i])),l.height=d(r,[t,i])),e===v.LT&&(Object.assign(l,c(r,[t,i])),Object.assign(l,m(r,[t,i]))),e===v.RT&&(Object.assign(l,m(r,[t,i])),l.width=s(r,[t,i])),a(l).then((()=>{n.refreshDeps()}))}),{domTarget:i}),i}function k(e,t){const{update:n,state:i,setState:o,headerElRef:r,self:a,setInsideState:l}=e,{refreshDeps:s,resize:d,setXY:c,full:p}=t;u.useEffect((()=>()=>{a.unmounted=!0}),[]),u.useEffect((()=>{a.tipNode=function(){if("undefined"==typeof window)return;if(void 0===window.document)return;const e=document.getElementById("J__M78__TIP__NODE");if(e)return e;const t=document.createElement("div");return t.id="J__M78__TIP__NODE",t.className="m78-wine_tip-node",document.body.appendChild(t),t}(),n({immediate:!0,display:"block"}).then((()=>{s(),n({visibility:"visible",immediate:!0}),i.initFull?p():d(),m((()=>{l({headerHeight:a.headerSize[1]+4})}))}))}),[]),u.useEffect((()=>(window.addEventListener("resize",s),()=>window.removeEventListener("resize",s))),[]),u.useEffect((()=>{let e=!1;return i.open?(n({immediate:!0,display:"block"}),n(T),t.top()):n(x).then((()=>{e||n({immediate:!0,display:"none"})})),()=>{e=!0}}),[i.open]),F.useEvent((()=>{i.zIndex>S.zIndex&&o({zIndex:S.zIndex})})),f((({memo:e=[],xy:n,down:i,delta:[o,r]})=>{const[a,l]=e,s=a||t.getCursorWrapOffset(n);return c(n[0]-s[0],n[1]-s[1]),l&&l>60&&t.refreshTipNode(n,i),[s,(l||0)+Math.abs(o)+Math.abs(r)]}),{domTarget:r}),e.dragLineRRef=W(v.R,e,t),e.dragLineLRef=W(v.L,e,t),e.dragLineBRef=W(v.B,e,t),e.dragLineTRef=W(v.T,e,t),e.dragLineLTRef=W(v.LT,e,t),e.dragLineRTRef=W(v.RT,e,t),e.dragLineRBRef=W(v.RB,e,t),e.dragLineLBRef=W(v.LB,e,t)}const D=(e,t,n)=>u.createElement("div",r({className:"m78-wine_header"},e),u.createElement("div",{className:"m78-wine_header-content"},t.state.headerNode),u.createElement("div",{className:"m78-wine_header-actions",onClick:e=>e.stopPropagation()},u.createElement("span",r({tabIndex:1,className:"m78-wine_btn"},C(t.hide)),u.createElement("span",{className:"m78-wine_hide-btn"})),n&&u.createElement("span",r({tabIndex:1,className:"m78-wine_btn"},C(t.current.resize)),u.createElement("span",{className:"m78-wine_resize-btn"})),!n&&u.createElement("span",r({tabIndex:1,className:"m78-wine_btn"},C(t.current.full)),u.createElement("span",{className:"m78-wine_max-btn"})),u.createElement("span",r({tabIndex:1,className:"m78-wine_btn __warning"},C(t.dispose)),u.createElement("span",{className:"m78-wine_dispose-btn"}))));const H=z({component:e=>{const{state:t,instance:n}=e,[i,o]=w((()=>({isFull:!1,headerHeight:void 0}))),a=u.useRef(null),l=u.useRef(null),[s,d]=g((()=>{const[e,n]=O(t);return{opacity:0,x:0,y:0,config:R.stiff,width:e,height:n,display:"none",visibility:"hidden"}})),c=b({x:0,y:0,winSize:[0,0],availableSize:[0,0],wrapSize:[0,0],headerSize:[0,0],fullSize:[0,0],bound:_,windowBound:_}),f={wrapElRef:a,headerElRef:l,state:t,setState:n.setState,setInsideState:o,insideState:i,self:c,spProps:s,update:d,dragLineRRef:null,dragLineLRef:null,dragLineBRef:null,dragLineTRef:null,dragLineLTRef:null,dragLineRTRef:null,dragLineRBRef:null,dragLineLBRef:null},m=P(f);k(f,m);const z=u.useMemo((()=>(n.current={el:a,top:m.top,full:m.full,resize:m.resize,refresh:()=>{}},n)),[]);return function(e,t,n){const{state:i,insideState:o}=e,{resize:a,full:l,top:s}=t,d=i.headerCustomer||D;return u.createElement(p.div,{style:r(r(r({},i.style),{zIndex:i.zIndex}),e.spProps),className:h("m78-wine",i.className),ref:e.wrapElRef,onTouchStart:s,onMouseDown:s},u.createElement("div",{className:"m78-wine_decorate"},d({ref:e.headerElRef,onDoubleClick:()=>o.isFull?a():l()},n,o.isFull),u.createElement("div",{className:"m78-wine_content m78-wine_scrollbar",style:{top:o.headerHeight}},i.content)),u.createElement("div",{className:"m78-wine_drag-line-l",ref:e.dragLineLRef}),u.createElement("div",{className:"m78-wine_drag-line-t",ref:e.dragLineTRef}),u.createElement("div",{className:"m78-wine_drag-line-r",ref:e.dragLineRRef}),u.createElement("div",{className:"m78-wine_drag-line-b",ref:e.dragLineBRef}),u.createElement("div",{className:"m78-wine_drag-line-rb",ref:e.dragLineRBRef}),u.createElement("div",{className:"m78-wine_drag-line-lb",ref:e.dragLineLBRef}),u.createElement("div",{className:"m78-wine_drag-line-lt",ref:e.dragLineLTRef}),u.createElement("div",{className:"m78-wine_drag-line-rt",ref:e.dragLineRTRef}))}(f,m,z)},defaultState:S,namespace:"M78__WINE"}),U=()=>u.createElement("div",null,u.createElement(H.RenderBoxTarget,null),u.createElement("button",{onClick:function(){H.render({content:u.createElement("div",{style:{padding:20,fontSize:24}},u.createElement("h2",null,"My Window!"),u.createElement("div",null,"")),sizeRatio:.5})}},"render window"));E.render(u.createElement(U,null),document.getElementById("root"));
